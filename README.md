# db-seeder

Проект **db-seeder** предназначен для генерации и загрузки начальных данных в базу данных PostgreSQL. Данные загружаются в три этапа с помощью асинхронных скриптов на Python.

---

## Быстрый старт

Для запуска заполнения базы данных используйте следующие команды (строго в таком же порядке):

```bash
python -m src.seed.seed_constant_data
python -m src.seed.seed_base_data
python -m src.seed.stream_data
```

---

## Описание команд

- `seed_constant_data`  
  Заполняет таблицы константными данными и тестовыми пользователями, без зависимостей от других таблиц.

- `seed_base_data`  
  Загружает базовые данные сгенерированные для стран, пользователей и удобств (amenities). Этот этап не зависит от других таблиц.

- `stream_data`  
  Выполняет батчевую генерацию и вставку зависимых данных (локации, адреса, отели, комнаты, бронирования, отзывы и т.д.) в цикле с паузой. Используется размер батча, указанный в конфигурации.

---

## Как это работает

- Используется асинхронное взаимодействие с базой данных через класс `PostgresDB` из модуля `src.infra.db`.
- Для генерации данных применяются функции из `src.seed.generation_funcs`.
- Логирование процесса происходит через стандартный логгер `get_logger`.
- Для конфигурации используется `dotenv` и конфиг из модуля `src.core.config`.

---

## Структура проекта

- `src/seed/seed_constant_data.py` — константы и тестовые данные
- `src/seed/seed_base_data.py` — независимые базовые данные
- `src/seed/stream_data.py` — генерация и загрузка зависимых данных батчами

---

## Требования

- Python 3.11+
- PostgreSQL
- Установленные зависимости (`asyncio`, `dotenv` и др.)

---

## Запуск

1. Убедитесь, что настроен `.env` файл с параметрами подключения к БД.
2. Запустите команды поочередно для наполнения базы данных начальными и динамическими данными.
